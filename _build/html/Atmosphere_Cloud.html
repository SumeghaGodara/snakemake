

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>24. Accessing The Atmosphere Cloud &#8212; snakemake2019 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="29. Running Jobs in containers" href="container_tutorial.html" />
    <link rel="prev" title="12. Basic Tutorial" href="basic_tutorial.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="container_tutorial.html" title="29. Running Jobs in containers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basic_tutorial.html" title="12. Basic Tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="toc.html">snakemake2019 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contents</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">24. Accessing The Atmosphere Cloud</a><ul>
<li><a class="reference internal" href="#ssh-client-for-windows-users">24.1. SSH Client for WINDOWS users</a></li>
</ul>
</li>
<li><a class="reference internal" href="#login-launch-instance">25. Login &amp; Launch Instance</a></li>
<li><a class="reference internal" href="#ssh-secure-login">26. SSH Secure-Login</a></li>
<li><a class="reference internal" href="#instance-maintenance">27. Instance Maintenance</a><ul>
<li><a class="reference internal" href="#atmosphere-dashboard">27.1. Atmosphere Dashboard</a></li>
<li><a class="reference internal" href="#delete-instance">27.2. Delete Instance</a></li>
<li><a class="reference internal" href="#suspend-instance">27.3. Suspend Instance</a></li>
<li><a class="reference internal" href="#request-more-allocation-units">27.4. Request More Allocation Units</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-features">28. Additional Features</a><ul>
<li><a class="reference internal" href="#web-shell">28.1. Web Shell</a></li>
<li><a class="reference internal" href="#web-desktop">28.2. Web Desktop</a></li>
<li><a class="reference internal" href="#transferring-data-to-and-from-an-instance">28.3. Transferring Data to and from an Instance</a></li>
<li><a class="reference internal" href="#custom-images">28.4. Custom Images</a></li>
<li><a class="reference internal" href="#deposit-rsa-key">28.5. Deposit rsa-key</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="basic_tutorial.html"
                        title="previous chapter">12. Basic Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="container_tutorial.html"
                        title="next chapter">29. Running Jobs in containers</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Atmosphere_Cloud.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="toc.html">Docs</a></li>
              
              <li>24. Accessing The Atmosphere Cloud</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="accessing-the-atmosphere-cloud">
<h1>24. Accessing The Atmosphere Cloud<a class="headerlink" href="#accessing-the-atmosphere-cloud" title="Permalink to this headline">¶</a></h1>
<p><img alt="_images/setup1.png" src="_images/setup1.png" /></p>
<ul class="simple">
<li><strong>Atmosphere, CyVerse’s cloud-computing platform allows you to launch your own isolated virtual machine (VM) image and software, using compute resources such as CyVerse-provided software suites, and pre-configured, frequently used analysis routines, relevant algorithms, and datasets.</strong></li>
</ul>
<blockquote>
<div>To request access to Atmosphere, login to the <a class="reference external" href="https://user.cyverse.org/">CyVerse User Portal</a>. In the <a class="reference external" href="https://user.cyverse.org/services/mine%3E">Services</a> menu under ‘MY SERVICES’ you should see Atmosphere listed as an option you can launch. If not, look uner the <a class="reference external" href="https://user.cyverse.org/services/available">Available</a> menu, and click the ‘REQUEST ACCESS’ link. You will receive an email requesting additional information.</div></blockquote>
<ul class="simple">
<li>This is the first and last place in these lessons where it will matter if you are using PC, Mac, or Linux. After we connect to our virtual machines built using the same image; we will all be on the same operating system/computing environment.</li>
<li>Documentation on how to use Atmosphere resources can be found <a class="reference external" href="https://learning.cyverse.org/projects/atmosphere-guide/en/latest/index.html">here</a></li>
</ul>
<div class="section" id="ssh-client-for-windows-users">
<h2>24.1. SSH Client for WINDOWS users<a class="headerlink" href="#ssh-client-for-windows-users" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Windows-users will need to install UNIX-ready terminal.</li>
<li>Download &amp; Install <a class="reference external" href="http://mobaxterm.mobatek.net/download-home-edition.html">mobaxterm home edition</a></li>
<li>Start a new session; Fill in your “remote host” the IP address of your virtual machine. Then select “specify username” and enter your cyverse username; Click OK.</li>
</ul>
</div>
</div>
<div class="section" id="login-launch-instance">
<h1>25. Login &amp; Launch Instance<a class="headerlink" href="#login-launch-instance" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Login to <a class="reference external" href="https://atmo.cyverse.org/application/images">Atmosphere</a> by clicking the “login” butoon (right-upper corner).</li>
</ul>
<p><img alt="_images/login1.png" src="_images/login1.png" /></p>
<ul class="simple">
<li>Fill in your CyVerse username and password and click “LOGIN”</li>
</ul>
<p><img alt="_images/login2.png" src="_images/login2.png" /></p>
<ul class="simple">
<li>Select the “Projects” tab and then click the “CREATE NEW PROJECT” button</li>
</ul>
<p><img alt="_images/login3.png" src="_images/login3.png" />
<img alt="_images/login4.png" src="_images/login4.png" /></p>
<ul class="simple">
<li>Give your Project folder a name (Description is optional). Then click “CREATE”.</li>
</ul>
<p><img alt="_images/login5.png" src="_images/login5.png" /></p>
<ul class="simple">
<li>Click on your newly created project.</li>
<li>Click “NEW” and then “Instance” from the dropdown menu to start up a new virtual machine.</li>
</ul>
<p><img alt="_images/login6.png" src="_images/login6.png" /></p>
<ul class="simple">
<li>To select an image click on <strong>“Show All”</strong> tab and Search for <strong>“DCG-UNR-RNAseq”</strong> and choose the “DCG-UNR-RNAseq” image created by ‘sateeshp’.</li>
</ul>
<p><img alt="_images/login7.png" src="_images/login7.png" /></p>
<ul class="simple">
<li>Basic options<ul>
<li>Instance Name: e.x., “workshop” or you can leave it default which is the image name.</li>
<li>Base Image Version: “3.0”</li>
<li>Project: select project folder to host the instance</li>
<li>Allocation Source: should be your cyverse account</li>
<li>Provider: “CyVerse Cloud - Marana”</li>
<li>Instance size: <strong>Depending on your allocations, choose most suitable one.</strong></li>
<li>Recommended for this tutorial: “tiny1 (CPU: 1, Mem: 4GB, Disk: 30GB)”</li>
</ul>
</li>
</ul>
<p><img alt="_images/login8.png" src="_images/login8.png" /></p>
<ul class="simple">
<li>Launch instance and wait for the build to be deployed.</li>
<li>The virtual machine should now be booting up! and should take ~ 5-10 minutes. <strong>Note: During the build process..Be patient! Don’t reload or do anything. Once the virtual machine is ready, the “Activity” column will show “N/A” and the “Status” column will turn green and “Active” (see below)</strong></li>
</ul>
<p><img alt="_images/login9.png" src="_images/login9.png" /></p>
<ul class="simple">
<li>Navigate back to ‘Projects’ and click on your new instance’s name to see more information related to the instance you just created!</li>
<li>Copy the IP address of your instance.</li>
</ul>
<p><img alt="_images/login10.png" src="_images/login10.png" /></p>
</div>
<div class="section" id="ssh-secure-login">
<h1>26. SSH Secure-Login<a class="headerlink" href="#ssh-secure-login" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>MACOS &amp; LINUX users can open a Terminal window and Windows users start a new session in mobaxterm (see # Setup)</li>
<li>Establish a secure-login to the instance by typing the following:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">your_cyverseusername</span><span class="nd">@ip_address</span>
</pre></div>
</div>
<ul class="simple">
<li>This should log you into CyVerse and you should see a screen like this:</li>
</ul>
<p><img alt="_images/ssh1.png" src="_images/ssh1.png" /></p>
<ul class="simple">
<li>Enter ‘yes’ and then you will be asked for your CyVerse password.</li>
</ul>
<blockquote>
<div>Your cursor will not move or indicate you are typing as you enter your password. If you make a mistake, hit enter and you will be prompted again.</div></blockquote>
<ul class="simple">
<li>Successful login should look something like below</li>
</ul>
<p><img alt="_images/ssh2.png" src="_images/ssh2.png" /></p>
<blockquote>
<div>To close your current session and end SSH connection, type ‘exit’</div></blockquote>
<p><img alt="_images/ssh3.png" src="_images/ssh3.png" /></p>
</div>
<div class="section" id="instance-maintenance">
<h1>27. Instance Maintenance<a class="headerlink" href="#instance-maintenance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="atmosphere-dashboard">
<h2>27.1. Atmosphere Dashboard<a class="headerlink" href="#atmosphere-dashboard" title="Permalink to this headline">¶</a></h2>
<p><img alt="_images/maintain1.png" src="_images/maintain1.png" /></p>
</div>
<div class="section" id="delete-instance">
<h2>27.2. Delete Instance<a class="headerlink" href="#delete-instance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>To completely remove your instance, you can select the “Delete” button from the instance details page.</li>
<li>This will open up a dialogue window. Select the “Yes, delete this instance” button.</li>
<li>It may take Atmosphere a few minutes to process your request. The instance should disappear from the project when it has been successfully deleted.</li>
</ul>
<p><img alt="_images/maintain3.png" src="_images/maintain3.png" /></p>
</div>
<div class="section" id="suspend-instance">
<h2>27.3. Suspend Instance<a class="headerlink" href="#suspend-instance" title="Permalink to this headline">¶</a></h2>
<p><img alt="_images/maintain2.png" src="_images/maintain2.png" /></p>
<p><strong>Note: It is advisable to delete the machine if you are not planning to use it in future to save valuable resources. However if you want to use it in future, you can suspend it. Notice: IP address changes</strong></p>
</div>
<div class="section" id="request-more-allocation-units">
<h2>27.4. Request More Allocation Units<a class="headerlink" href="#request-more-allocation-units" title="Permalink to this headline">¶</a></h2>
<p><img alt="_images/maintain4.png" src="_images/maintain4.png" /></p>
</div>
</div>
<div class="section" id="additional-features">
<h1>28. Additional Features<a class="headerlink" href="#additional-features" title="Permalink to this headline">¶</a></h1>
<div class="section" id="web-shell">
<h2>28.1. Web Shell<a class="headerlink" href="#web-shell" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Access Command-Line Directly from your browser</li>
</ul>
<p><img alt="_images/additional1.png" src="_images/additional1.png" /></p>
</div>
<div class="section" id="web-desktop">
<h2>28.2. Web Desktop<a class="headerlink" href="#web-desktop" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Access your instance through a web desktop version from your browser</li>
</ul>
<p><img alt="_images/additional2.png" src="_images/additional2.png" /></p>
</div>
<div class="section" id="transferring-data-to-and-from-an-instance">
<h2>28.3. Transferring Data to and from an Instance<a class="headerlink" href="#transferring-data-to-and-from-an-instance" title="Permalink to this headline">¶</a></h2>
<p>An Atmosphere instance only contains data that were included in the original image that was used to make that instance. You can transfer data to/from the CyVerse Data Store, an Atmosphere Volume, a sever, or your local machine. In this guide, we will only cover data transfer using iCommands. iCommands is installed on every Atmosphere instance.</p>
<blockquote>
<div><strong>Related Links</strong></div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://cyverse-data-store-guide.readthedocs-hosted.com/en/latest/step2.html"><strong>iCommands Guide:</strong></a></li>
<li><a class="reference external" href="https://wiki.cyverse.org/wiki/display/DS/Setting+Up+iCommands"><strong>iCommands Download:</strong></a></li>
</ul>
<p><strong>Transferring Data to/from an Instance using iCommands</strong></p>
<p>You can execute to the instance’s icommand if you are connected via SSH or if you are connected to the desktop via VNC, open the instance’s terminal application.</p>
<ol>
<li><p class="first">At the instance’s terminal, start the iCommands configuration using the
‘iinit’ command and enter configure.</p>
<p>.. important::
This configuration is a one-time step on your first use with this
instance.</p>
<p>.. code:: bash</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> $ iinit

 # As prompted, enter the following values:
 # Host: data.cyverse.org
 # Port: 1247
 # User: your_cyverse_username
 # Zone: iplant
 # Password: your_cyverse_password
</pre></div>
</div>
<p>If you make a mistake in your configuration you can edit <code class="docutils literal notranslate"><span class="pre">~/.irods/irods_environment.json</span></code>
on your instance.</p>
</li>
<li><p class="first">Test your configuration by listing your Data Store contents with the “ils”
command.</p>
<p>.. code:: bash</p>
<p>$ ils</p>
<p>.. Tip::
If you made a mistake during the configuration, you can edit your
icommands configuration file.</p>
</li>
<li><p class="first">To download a file from the Data Store to your instance, use “iget”</p>
<p>.. code:: bash</p>
<p>$iget data_store_file</p>
</li>
<li><p class="first">To upload file from your instance to the Data Store use “iput”</p>
<p>.. code:: bash</p>
<p>$iget file_on_instance location_on_data_store</p>
</li>
</ol>
<p>.. tip::
iCommands has a variety of options, to see progress of transfers, operate
recursively, and more. See additional <a class="reference external" href="https://wiki.cyverse.org/wiki/display/DS/Using+iCommands">iCommands documentation</a> on the CyVerse wiki.</p>
<p>===</p>
</div>
<div class="section" id="custom-images">
<h2>28.4. Custom Images<a class="headerlink" href="#custom-images" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://hackmd.io/im0eDxViQgmxTL4zYBfGoQ#">Jetstream</a></li>
</ul>
</div>
<div class="section" id="deposit-rsa-key">
<h2>28.5. Deposit rsa-key<a class="headerlink" href="#deposit-rsa-key" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Concerning Keys:
Cryptographic keys are a convenient and secure way to authenticate without having to use passwords. They consist of a pair of files called the public and private keys: the public part can be shared with whoever you’d like to authenticate with (in our case, CyVerse Atmosphere!), and the private part is kept “secret” on your machine. Things that are encrypted with the public key can be be decrypted with the private key, but it is computationally intractable (ie, it would take on the order of thousands of years) to determine a private key from a public key. You can read more about it <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2">here</a></li>
<li>Create the RSA Key Pair on your laptop/computer:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ssh-keygen -t rsa
</pre></div>
</div>
<ul class="simple">
<li>Store the Keys and Passphrase. Once you have entered the Gen Key command, you will get a few more questions:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Enter file in which to save the key (/home/demo/.ssh/id_rsa):
</pre></div>
</div>
<ul class="simple">
<li>You can press enter here, saving the file to the user home (in this case, my example user is called demo).</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ Enter passphrase (empty for no passphrase):
</pre></div>
</div>
<ul class="simple">
<li>It’s up to you whether you want to use a passphrase though we recommend NOT to!.</li>
<li>The public key is now located in /home/demo/.ssh/id_rsa.pub. The private key (identification) is now located in /home/demo/.ssh/id_rsa</li>
<li>Copy the Public Key</li>
<li>Once the key pair is generated, it’s time to place the public key on the server that we want to use.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cat ~/.ssh/id_rsa.pub
</pre></div>
</div>
<ul class="simple">
<li>Copy all of the text that constitutes your public key and we will place it in our Atmosphere accounts.</li>
<li><strong>Deposit key on Atmosphere</strong></li>
<li>You are now ready to deposit your generated public key onto your Atmosphere account, to gain secure login each time you build and use an instance on Atmosphere.</li>
<li>Click on your username on the Atmosphere page and navigate to ‘Settings’ page</li>
</ul>
<p><img alt="_images/additional3.png" src="_images/additional3.png" /></p>
<ul class="simple">
<li>Scroll down to the advanced section and click on ‘Show More’</li>
</ul>
<p><img alt="_images/additional4.png" src="_images/additional4.png" /></p>
<ul class="simple">
<li>In the ‘SSH Configuration’ section, click on the ‘+’ sign</li>
</ul>
<p><img alt="_images/additional5.png" src="_images/additional5.png" /></p>
<ul class="simple">
<li>Paste your public key generated earlier and give this key a name</li>
</ul>
<p><img alt="_images/additional6.png" src="_images/additional6.png" /></p>
<ul class="simple">
<li><strong>You can now securely login to all the instances you launch on Atmosphere without having to type your password each-time you ssh login.</strong></li>
</ul>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="basic_tutorial.html" title="previous chapter (use the left arrow)">12. Basic Tutorial</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="container_tutorial.html" title="next chapter (use the right arrow)">29. Running Jobs in containers</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="container_tutorial.html" title="29. Running Jobs in containers"
             >next</a> |</li>
        <li class="right" >
          <a href="basic_tutorial.html" title="12. Basic Tutorial"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="toc.html">snakemake2019 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2019, Sateesh Peri. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>